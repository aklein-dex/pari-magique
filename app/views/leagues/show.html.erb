<% provide(:title, "League") %>

<h1><%= @league.name %></h1>

<% if can? :update, @leage %>
  <%= link_to 'Edit', edit_league_path(@league) %>
<% end %>

<h3>Members</h3>

<ul>
<% @league.users.each do |user| %>
  <li><%= user.username %></li>
<% end %>
</ul>

<h3>Requests</h3>

<ul>
<% @league.requests.pending.each do |request| %>
    <li>
      <%= request.user.username %>
      <%= form_for request  do |form| %>
        <%= form.hidden_field :status, id: :request_status, value: "accepted" %>
        <%= form.submit "Accept", class: "btn btn-primary" %>
      <% end %>

      <%= form_for request  do |form| %>
          <%= form.hidden_field :status, id: :request_status, value: "rejected" %>
          <%= form.submit "Reject", class: "btn btn-primary" %>
      <% end %>
    </li>
<% end %>
</ul>
